{"version":3,"sources":["file:///D:/game/iKunGame/assets/script/main.ts"],"names":["_decorator","Component","Node","assetManager","Sprite","SpriteFrame","AudioSource","Label","JsonAsset","ccclass","property","main","start","initTopBeiJing","loadBundle","err","ab","topSprite","node","getChildByPath","getComponent","downSprite","load","resAsset","spriteFrame","json","row1","i","length","list","data1","data2","initMusic","console","log","len","btnName","button","string","on","EventType","TOUCH_START","play","active","audioSource","array","push","e","pause","_audioSource","Array"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, resources,assetManager,SpriteAtlas,AssetManager, Sprite,SpriteFrame,AudioSource, Label, JsonAsset } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('main')\nexport class main extends Component {\n\n    @property(AudioSource)\n    public _audioSource: AudioSource = null!;\n    @property(AudioSource)\n    public array:Array<AudioSource> = new Array<AudioSource>;\n    start() {\n        this.initTopBeiJing();\n    }\n\n    initTopBeiJing(){\n        assetManager.loadBundle('assetsResours', async (err, ab: AssetManager.Bundle) => {\n            // 获得精灵节点\n            let topSprite = this.node.getChildByPath(\"topbackground\").getComponent(Sprite);\n            let downSprite = this.node.getChildByPath(\"downbackground\").getComponent(Sprite);\n\n            // 从ab包加载图集资源\n            ab.load('img/beij/spriteFrame',SpriteFrame,(err, resAsset) => {\n                topSprite.spriteFrame=resAsset;\n            });\n            \n            ab.load('img/downgg/spriteFrame',SpriteFrame,(err, resAsset) => {\n                downSprite.spriteFrame=resAsset;\n            });\n            ab.load('json/text',JsonAsset,(err, resAsset) => {\n                const json = resAsset.json as JsonAsset;\n                const row1 = json.row1;\n                \n                for (let i=0;i<row1.length; i++) {\n                    //取得数组数据\n                    let list = row1[i];  \n                    let data1 = list[0];\n                    let data2 = list[1];\n                    this.initMusic(i,data2);\n                    console.log(data1 +\"--\"+data2)\n                }\n                \n            });\n           \n        })\n    }\n\n\n\n\n    \n\n    initMusic (len : number,btnName : string) {\n            const button = this.node.getChildByPath(\"buttons/buttons1/Button-00\"+len);\n            button.getChildByPath(\"Label\").getComponent(Label).string=btnName;\n            button?.on(Node.EventType.TOUCH_START, this.play, this);\n            button.active=true;\n            // 获取 AudioSource 组件\n            const audioSource = button.getComponent(AudioSource)!;\n            console.log(audioSource);\n            // 将组件赋到全局变量 _audioSource 中\n            // this._audioSource = audioSource;\n            this.array.push(audioSource);\n     }\n     play (e) {\n\n        console.log(e)\n         // 播放音乐\n        //  for(let i = 0;i<this.array.length;i++){\n        //     this.array[i].play();\n        //  }\n        //  this._audioSource[1].play();\n     }\n\n     pause () {\n         // 暂停音乐\n         this._audioSource.pause();\n     }\n}\n\n"]}